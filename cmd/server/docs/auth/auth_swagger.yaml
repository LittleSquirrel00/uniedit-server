basePath: /api/v1
definitions:
  internal_module_auth.APIKeyResponse:
    properties:
      created_at:
        type: string
      id:
        type: string
      key_prefix:
        type: string
      last_used_at:
        type: string
      name:
        type: string
      provider:
        type: string
      scopes:
        items:
          type: string
        type: array
    type: object
  internal_module_auth.CallbackRequest:
    properties:
      code:
        type: string
      provider:
        $ref: '#/definitions/internal_module_auth.OAuthProvider'
      state:
        type: string
    required:
    - code
    - provider
    - state
    type: object
  internal_module_auth.CreateAPIKeyRequest:
    properties:
      api_key:
        type: string
      name:
        type: string
      provider:
        type: string
      scopes:
        items:
          type: string
        type: array
    required:
    - api_key
    - name
    - provider
    type: object
  internal_module_auth.CreateSystemAPIKeyRequest:
    properties:
      expires_in_days:
        description: NULL = never expires
        type: integer
      name:
        type: string
      rate_limit_rpm:
        type: integer
      rate_limit_tpm:
        type: integer
      scopes:
        items:
          type: string
        type: array
    required:
    - name
    type: object
  internal_module_auth.LoginRequest:
    properties:
      provider:
        $ref: '#/definitions/internal_module_auth.OAuthProvider'
      redirect_url:
        type: string
    required:
    - provider
    type: object
  internal_module_auth.LoginResponse:
    properties:
      auth_url:
        type: string
      state:
        type: string
    type: object
  internal_module_auth.OAuthProvider:
    enum:
    - github
    - google
    type: string
    x-enum-varnames:
    - OAuthProviderGitHub
    - OAuthProviderGoogle
  internal_module_auth.RefreshRequest:
    properties:
      refresh_token:
        type: string
    required:
    - refresh_token
    type: object
  internal_module_auth.SystemAPIKeyCreateResponse:
    properties:
      allowed_ips:
        items:
          type: string
        type: array
      cache_hits:
        type: integer
      cache_misses:
        type: integer
      created_at:
        type: string
      expires_at:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      key:
        description: Full API key, only shown once
        type: string
      key_prefix:
        type: string
      last_rotated_at:
        type: string
      last_used_at:
        type: string
      name:
        type: string
      rate_limit_rpm:
        type: integer
      rate_limit_tpm:
        type: integer
      rotate_after_days:
        type: integer
      scopes:
        items:
          type: string
        type: array
      total_cost_usd:
        type: number
      total_input_tokens:
        type: integer
      total_output_tokens:
        type: integer
      total_requests:
        type: integer
    type: object
  internal_module_auth.SystemAPIKeyResponse:
    properties:
      allowed_ips:
        items:
          type: string
        type: array
      cache_hits:
        type: integer
      cache_misses:
        type: integer
      created_at:
        type: string
      expires_at:
        type: string
      id:
        type: string
      is_active:
        type: boolean
      key_prefix:
        type: string
      last_rotated_at:
        type: string
      last_used_at:
        type: string
      name:
        type: string
      rate_limit_rpm:
        type: integer
      rate_limit_tpm:
        type: integer
      rotate_after_days:
        type: integer
      scopes:
        items:
          type: string
        type: array
      total_cost_usd:
        type: number
      total_input_tokens:
        type: integer
      total_output_tokens:
        type: integer
      total_requests:
        type: integer
    type: object
  internal_module_auth.TokenPair:
    properties:
      access_token:
        type: string
      expires_at:
        type: string
      expires_in:
        description: seconds until access token expires
        type: integer
      refresh_token:
        type: string
      token_type:
        type: string
    type: object
  internal_module_auth.UpdateSystemAPIKeyRequest:
    properties:
      is_active:
        type: boolean
      name:
        type: string
      rate_limit_rpm:
        type: integer
      rate_limit_tpm:
        type: integer
      scopes:
        items:
          type: string
        type: array
    type: object
  internal_module_auth.UserResponse:
    properties:
      avatar_url:
        type: string
      created_at:
        type: string
      email:
        type: string
      id:
        type: string
      name:
        type: string
      provider:
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: support@uniedit.io
    name: UniEdit Support
    url: https://uniedit.io/support
  description: UniEdit 视频编辑器后端 API
  license:
    name: Proprietary
    url: https://uniedit.io/license
  termsOfService: https://uniedit.io/terms
  title: UniEdit Server API
  version: "1.0"
paths:
  /api-keys:
    get:
      description: Get all OpenAI-style API keys (sk-xxx) for the current user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/internal_module_auth.SystemAPIKeyResponse'
            type: array
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: List system API keys
      tags:
      - Auth
    post:
      consumes:
      - application/json
      description: Create a new OpenAI-style API key (sk-xxx) for API access
      parameters:
      - description: Create API key request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_module_auth.CreateSystemAPIKeyRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/internal_module_auth.SystemAPIKeyCreateResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: Conflict
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Create system API key
      tags:
      - Auth
  /api-keys/{id}:
    delete:
      description: Delete a system API key permanently
      parameters:
      - description: API Key ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Delete system API key
      tags:
      - Auth
    get:
      description: Get details of a specific system API key
      parameters:
      - description: API Key ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_module_auth.SystemAPIKeyResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Get system API key
      tags:
      - Auth
    patch:
      consumes:
      - application/json
      description: Update settings of a system API key
      parameters:
      - description: API Key ID
        in: path
        name: id
        required: true
        type: string
      - description: Update request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_module_auth.UpdateSystemAPIKeyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_module_auth.SystemAPIKeyResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Update system API key
      tags:
      - Auth
  /api-keys/{id}/rotate:
    post:
      description: Generate a new key value for an existing system API key
      parameters:
      - description: API Key ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_module_auth.SystemAPIKeyCreateResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Rotate system API key
      tags:
      - Auth
  /auth/callback:
    post:
      consumes:
      - application/json
      description: Complete the OAuth authentication flow with the authorization code
      parameters:
      - description: Callback request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_module_auth.CallbackRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Complete OAuth login
      tags:
      - Auth
  /auth/login:
    post:
      consumes:
      - application/json
      description: Start the OAuth authentication flow with the specified provider
      parameters:
      - description: Login request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_module_auth.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_module_auth.LoginResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Initiate OAuth login
      tags:
      - Auth
  /auth/logout:
    post:
      description: Revoke all tokens for the current user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Logout user
      tags:
      - Auth
  /auth/refresh:
    post:
      consumes:
      - application/json
      description: Exchange a refresh token for a new access token
      parameters:
      - description: Refresh request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_module_auth.RefreshRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_module_auth.TokenPair'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Refresh access token
      tags:
      - Auth
  /keys:
    get:
      description: Get all stored third-party provider API keys for the current user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/internal_module_auth.APIKeyResponse'
            type: array
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: List provider API keys
      tags:
      - Auth
    post:
      consumes:
      - application/json
      description: Store a new third-party provider API key
      parameters:
      - description: Create API key request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_module_auth.CreateAPIKeyRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/internal_module_auth.APIKeyResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: Conflict
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Create provider API key
      tags:
      - Auth
  /keys/{id}:
    delete:
      description: Delete a stored third-party provider API key
      parameters:
      - description: API Key ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Delete provider API key
      tags:
      - Auth
  /keys/{id}/rotate:
    post:
      consumes:
      - application/json
      description: Update the stored API key value for a provider
      parameters:
      - description: API Key ID
        in: path
        name: id
        required: true
        type: string
      - description: New API key
        in: body
        name: request
        required: true
        schema:
          properties:
            api_key:
              type: string
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_module_auth.APIKeyResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Rotate provider API key
      tags:
      - Auth
  /users/me:
    get:
      description: Get the profile of the currently authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_module_auth.UserResponse'
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Get current user
      tags:
      - Auth
securityDefinitions:
  BearerAuth:
    description: 'Bearer token authentication. Format: "Bearer {token}"'
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
